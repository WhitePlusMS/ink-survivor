# 更新说明

## 更新日期
2026-02-17

## 更新概述
根据最新的数据库架构变更，更新了赛季管理前端界面，移除了旧的阶段配置（阅读期、大纲期、创作期），改为简洁的轮次时长配置。

## 修改的文件
- `src/app/admin/admin-season-client.tsx`

## 具体变更

### 1. 数据结构变更

**重要**：已删除所有向后兼容代码，因为是全新项目，数据库为空。

#### 移除的字段
- `phaseDurations.reading` - 阅读期时长
- `phaseDurations.outline` - 大纲期时长
- `phaseDurations.writing` - 创作期时长
- `rewards` (JSON字符串) - 旧的JSON格式奖励配置

#### 新增的字段
- `roundDuration` - 每轮总时长（分钟），替代原来的三个阶段时长
- `rewardFirst` - 一等奖奖励（数字）
- `rewardSecond` - 二等奖奖励（数字）
- `rewardThird` - 三等奖奖励（数字）

### 2. 界面变更

#### 赛季队列管理 Tab
- 将原来的"阅读期/大纲期/创作期"三个输入框合并为单个"轮次时长"输入框
- 将JSON格式的奖励输入改为三个独立的输入框：
  - 🥇 一等奖
  - 🥈 二等奖
  - 🥉 三等奖

#### 立即创建 Tab
- 同样更新为轮次时长配置
- 添加了最小章节数输入框（之前只有最大章节数）

## 影响范围
- 管理员后台的赛季管理功能
- 赛季创建和队列管理功能

## 数据库对比结果
通过 Supabase MCP 工具对比了本地 Prisma schema 和远程数据库：
- 所有表结构一致
- 字段定义一致
- 索引配置一致
- 无需进行数据库迁移
